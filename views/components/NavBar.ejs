<nav
  class="fixed inset-0 w-full flex justify-center items-center h-[60px] z-10">
  <div
    class="flex justify-between container h-full lg:h-[60px] flex-col lg:flex-row mx-auto px-4">
    <div
      class="flex justify-between lg:justify-center items-center left-0 top-0 lg:inset-0 z-50">
      <div class="flex items-center justify-center">
        <img
          src="/images/icon_1024_1024_transparent.png"
          alt="Algorithm Logo"
          class="w-[50px] h-[50px] drop-shadow-2xl" />
        <div
          class="hidden md:block text-center text-white text-base font-bold font-mono tracking-[4.80px]">
          Algorithm
        </div>
      </div>
      <div class="block lg:hidden text-white" id="toggle-menu">
        <button id="nav-menu" class="z-20 flex items-center p-4 box-border">
          <div class="relative transition-transform ease-in-out duration-75 transform rotate-0 space-y-2 box-border mr-auto">
            <span class="bg-white block w-8 h-0.5 transition-all ease-in-out duration-200 transform"></span>
            <span class="bg-white block w-8 h-0.5 transition-all ease-in-out duration-200 transform"></span>
          </div>
        </button>
      </div>
    </div>
    <div
      id="hamburger-menu"
      class="absolute hidden lg:flex justify-center mx-auto lg:mr-0 bg-neutral-900 bg-opacity-90 lg:bg-transparent h-[100vh] lg:h-auto w-full lg:justify-end left-0 rigth-0 lg:static -z-50 lg:z-0">
      <ul
        class="absolute top-1/3 left-0 rigth-0 lg:static flex justify-evenly items-center flex-col w-full mx-auto lg:mr-0 lg:flex-row lg:w-1/2 2xl:w-1/3">
        <li id="nav-item" class="text-center text-white transition-all ease-in-out -translate-x-24 opacity-0 lg:translate-x-0 lg:opacity-100 hover:text-sky-500 text-4xl lg:text-base my-4 lg:my-0 font-bold font-mono">
          <a href="/" class="">Főoldal</a>
        </li>
        <li id="nav-item" class="text-center text-white transition-all ease-in-out -translate-x-24 opacity-0 lg:translate-x-0 lg:opacity-100 hover:text-sky-500 text-4xl lg:text-base my-4 lg:my-0 font-bold font-mono">
          <a href="/algoritmusok" class="">Algoritmusok</a>
        </li>
        <li id="nav-item" class="text-center text-white transition-all ease-in-out -translate-x-24 opacity-0 lg:translate-x-0 lg:opacity-100 hover:text-sky-500 text-4xl lg:text-base my-4 lg:my-0 font-bold font-mono">
          <a href="/teszt" class="">Szintfelmérő</a>
        </li>
        <li id="nav-item" class="text-center text-white transition-all ease-in-out -translate-x-24 opacity-0 lg:translate-x-0 lg:opacity-100 hover:text-sky-500 text-4xl lg:text-base my-4 lg:my-0 font-bold font-mono">
          <a href="/rolunk" class="">Rólunk</a>
        </li>

        <% if (locals.searchYes) { %>
          <li
            id="focus-search-bar"
            class="hidden cursor-pointer lg:block w-[37px] h-[37px] bg-zinc-300 relative rounded-full shadow backdrop-blur-sm scale-1 transition-all hover:scale-125">
            <img
              src="/images/search.svg"
              alt="Kereső"
              class="w-6 h-6 absolute inset-1.5" />
          </li>

          <script>
            document
              .querySelector("#focus-search-bar")
              .addEventListener("click", () => {
                console.log("clicked!");
                document.getElementById("searchBar").focus();
              });
          </script>
        <% } %>
      </ul>
    </div>
  </div>
</nav>
<script>
  let isOpen = false;

  document.querySelector("#nav-menu").addEventListener("click", () => {
    const span1_2 = document.querySelector("#nav-menu>div>span:nth-child(1)");
    const span2_2 = document.querySelector("#nav-menu>div>span:nth-child(2)");

    if (!span2_2.classList.contains("w-4")) {
      span2_2.classList.add("w-4");
      span2_2.classList.remove("w-8");

      isOpen = false;
    } else {
      span2_2.classList.remove("w-4");
      span2_2.classList.add("w-8");

      isOpen = true;
    }
  })

  document.querySelector("#toggle-menu").addEventListener("click", () => {
    if (!isOpen) {
      document
        .querySelector("#hamburger-menu")
        .classList.remove("hidden", "-z-50");

      let x = 0;

      let animate = setInterval(() => {
        if (document.querySelectorAll("#nav-item").length === x) {
          x = 0;

          clearInterval(animate);
        } else {
          document.querySelectorAll("#nav-item")[x].classList.remove(
            "-translate-x-24",
            "opacity-0"
          )
          
          x++;
        }

      }, 100);
    }

    if (isOpen) {
      let y = 0;

      let animateClose = setInterval(() => {
        if (document.querySelectorAll("#nav-item").length !== y) {
          document.querySelectorAll("#nav-item")[y].classList.add(
            "-translate-x-24",
            "opacity-0"
          )

          y++;
        } else {
          y = 0;

          document
            .querySelector("#hamburger-menu")
            .classList.add("hidden", "-z-50");

          clearInterval(animateClose)
        }
      }, 100);
    }
    
  });
</script>
